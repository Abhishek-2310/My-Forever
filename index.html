<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>For You üíò</title>
  <style>
    :root{
      --bg:#0b0b12; --text:#f6f6ff; --muted:#b9b9d6;
      --accent:#ff4d8d; --good:#4dffb5; --bad:#ff6b6b;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background:
        radial-gradient(1200px 800px at 70% 10%, rgba(255,77,141,.25), transparent 60%),
        radial-gradient(900px 600px at 10% 30%, rgba(77,255,181,.14), transparent 60%),
        var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex; align-items:center; justify-content:center;
      padding:20px;
    }
    .wrap{ width:min(860px,100%); }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      border-radius:22px;
      padding:20px;
      box-shadow:0 16px 50px rgba(0,0,0,.45);
      position:relative; overflow:hidden;
    }
    .sparkle{
      position:absolute; inset:-40px;
      background-image:
        radial-gradient(circle at 20% 20%, rgba(255,77,141,.20) 0 2px, transparent 3px),
        radial-gradient(circle at 80% 30%, rgba(77,255,181,.14) 0 2px, transparent 3px),
        radial-gradient(circle at 60% 70%, rgba(255,255,255,.08) 0 2px, transparent 3px);
      opacity:.85; pointer-events:none; transform: rotate(2deg);
    }
    .topline{ display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
    .badge{
      display:inline-flex; gap:8px; align-items:center;
      padding:8px 12px; border-radius:999px;
      background: rgba(255,77,141,.12);
      border:1px solid rgba(255,77,141,.25);
      font-weight:650; font-size:14px;
    }
    .progress{
      flex:1; min-width:180px;
      height:10px; border-radius:999px; overflow:hidden;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.08);
    }
    .bar{
      height:100%; width:0%;
      background: linear-gradient(90deg, rgba(255,77,141,.95), rgba(77,255,181,.85));
      transition: width .35s ease;
    }

    h1{ margin: 14px 0 6px; font-size: clamp(24px, 3.8vw, 40px); }
    p{ margin: 8px 0; color:var(--muted); line-height:1.55; }
    .tiny{ font-size:13px; color: rgba(255,255,255,.72); }
    .note{
      margin-top:10px;
      padding:12px;
      border-radius:14px;
      border:1px dashed rgba(255,255,255,.20);
      color: rgba(255,255,255,.86);
      background: rgba(255,255,255,.04);
    }
    .divider{ height:1px; background: rgba(255,255,255,.10); margin:16px 0; }

    .screen{ display:none; }
    .screen.active{ display:block; }

    .qbox{
      margin-top:14px;
      padding:14px;
      border-radius:16px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.10);
    }
    .choices{ display:grid; gap:10px; margin-top:12px; }
    button{
      border:0; cursor:pointer;
      padding:12px 14px;
      border-radius:14px;
      background: rgba(255,255,255,.08);
      color: var(--text);
      border:1px solid rgba(255,255,255,.12);
      font-weight:700;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
      text-align:left;
    }
    button:hover{ background: rgba(255,255,255,.11); border-color: rgba(255,255,255,.18); }
    button:active{ transform: translateY(1px); }
    .primary{
      background: rgba(255,77,141,.18);
      border-color: rgba(255,77,141,.35);
      text-align:center;
    }
    .primary:hover{ background: rgba(255,77,141,.24); }
    .ghost{ background: transparent; text-align:center; }

    .choice.correct{ border-color: rgba(77,255,181,.55); background: rgba(77,255,181,.10); }
    .choice.wrong{ border-color: rgba(255,107,107,.55); background: rgba(255,107,107,.10); }

    .btnrow{ display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; }

    input{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      outline:none;
      font-size:16px;
    }

    /* Grill meter (now visible on all screens) */
    .meterWrap{
      margin-top:14px;
      padding:12px;
      border-radius:16px;
      background: rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
    }
    .meterTop{ display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; }
    .meter{
      margin-top:10px;
      height:12px;
      border-radius:999px;
      overflow:hidden;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
    }
    .meterBar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(77,255,181,.85), rgba(255,77,141,.95));
      transition: width .25s ease;
    }

    .final{
      padding:16px;
      border-radius:18px;
      background: rgba(255,77,141,.12);
      border: 1px solid rgba(255,77,141,.28);
    }

    .bigQuestion{
      font-size: clamp(26px, 4vw, 46px);
      font-weight: 900;
      color: rgba(255,255,255,.96);
      margin-top: 14px;
    }

    /* Checkbox list */
    .checklist{ margin-top:12px; display:grid; gap:10px; }
    .checkItem{
      display:flex; align-items:center; gap:10px;
      padding:12px; border-radius:14px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
    }
    .checkItem input[type="checkbox"]{ width:18px; height:18px; accent-color: var(--accent); }
    .checkItem label{ cursor:pointer; font-weight:650; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="sparkle"></div>

      <div class="topline">
        <div class="badge">üíå Love Quest</div>
        <div class="progress" aria-label="progress"><div class="bar" id="bar"></div></div>
        <div class="badge" id="stepLabel">Step 1/7</div>
      </div>

      <!-- Grill meter (persistent) -->
      <div class="meterWrap" aria-label="Grill Meter">
        <div class="meterTop">
          <div><b>üî• Grill Meter</b> <span class="tiny">(fills up when you get it wrong üò≠)</span></div>
          <div class="tiny">Level: <span id="grillLevel">0</span>/10</div>
        </div>
        <div class="meter"><div class="meterBar" id="grillBar"></div></div>
        <div class="tiny" id="grillMsg" style="margin-top:8px;">Status: peaceful‚Ä¶ for now üòå</div>
      </div>

      <!-- Screen 0: intro -->
      <section class="screen active" id="s0">
        <h1>Hi <span id="herName"></span> üíò</h1>
        <p id="introText"></p>

        <div class="note tiny">
          Tip: Works on phone. You can screenshot your score and roast me later üòÖ
        </div>

        <div class="btnrow">
          <button class="primary" id="startBtn">Start</button>
        </div>
      </section>

      <!-- Screen 1: MCQ -->
      <section class="screen" id="s1">
        <h1>Level 1: The Start</h1>
        <p id="q1Text"></p>
        <div class="qbox">
          <div class="choices" id="q1Choices"></div>
          <div class="tiny" id="q1Hint"></div>
        </div>
        <div class="btnrow">
          <button class="ghost" id="back1">Back</button>
        </div>
      </section>

      <!-- Screen 2: Nickname checkboxes -->
      <section class="screen" id="s2">
        <h1>Level 2: Nicknames ‚úÖ</h1>
        <p id="q2Text"></p>

        <div class="qbox">
          <div class="checklist" id="q2Checklist"></div>

          <div class="btnrow">
            <button class="primary" id="q2Continue">Continue</button>
            <button class="ghost" id="q2Clear">Clear</button>
          </div>

          <div class="note" id="q2Reveal" style="display:none;"></div>
        </div>

        <div class="btnrow">
          <button class="ghost" id="back2">Back</button>
        </div>
      </section>

      <!-- Screen 3: Grill joke -->
      <section class="screen" id="s3">
        <h1>Level 3: Who Started The Grilling?</h1>
        <p>Let‚Äôs be honest üòÖ</p>
        <div class="qbox">
          <div class="choices" id="q3Choices"></div>
          <div class="note" id="q3Reveal" style="display:none;"></div>
        </div>
        <div class="btnrow">
          <button class="primary" id="toWouldYouRather" disabled>Continue</button>
          <button class="ghost" id="back3">Back</button>
        </div>
      </section>

      <!-- Screen 4: Would you rather -->
      <section class="screen" id="s4">
        <h1>Level 4: Would You Rather?</h1>
        <p>No wrong answers. Just vibes.</p>
        <div class="qbox">
          <div class="choices" id="wyrChoices"></div>
          <div class="note" id="wyrReveal" style="display:none;"></div>
        </div>
        <div class="btnrow">
          <button class="primary" id="toMemoryCard" disabled>Continue</button>
          <button class="ghost" id="back4">Back</button>
        </div>
      </section>

      <!-- Screen 5: Memory card -->
      <section class="screen" id="s5">
        <h1>Level 5: Pick a Memory</h1>
        <p>Choose one. It reveals something I‚Äôm holding close.</p>
        <div class="qbox">
          <div class="choices">
            <button class="choice" data-card="0">üìÖ December 22</button>
            <button class="choice" data-card="1">üè† January 18</button>
            <button class="choice" data-card="2">üî• The Grilling Era</button>
          </div>
          <div class="note" id="cardReveal" style="display:none;"></div>
        </div>
        <div class="btnrow">
          <button class="primary" id="toFinal" disabled>Final Door</button>
          <button class="ghost" id="back5">Back</button>
        </div>
      </section>

      <!-- Screen 6: final -->
      <section class="screen" id="s6">
        <h1>Final Door üîê</h1>
        <p>Type the secret phrase to open it:</p>
        <div class="qbox">
          <input id="finalInput" placeholder="" autocomplete="off" />
          <div class="btnrow">
            <button class="primary" id="finalSubmit">Open</button>
          </div>
          <div class="tiny" id="finalFeedback"></div>
        </div>

        <div class="divider"></div>

        <div class="final" id="finalReveal" style="display:none;">
          <h1 style="margin-top:0;">My love‚Ä¶ üíç</h1>
          <p id="proposalText" style="color:rgba(255,255,255,.88);"></p>
          <div class="bigQuestion">Will you marry me?</div>
          <p class="tiny" style="margin-top:10px;">
            (If you say yes, I‚Äôm ready to be grilled for life üòåüî•)
          </p>
        </div>

        <div class="btnrow">
          <button class="ghost" id="restart">Play Again</button>
        </div>
      </section>
    </div>

    <p class="tiny" style="text-align:center; margin-top:10px;">
      Made with ‚ù§Ô∏è from <span id="footerYourName"></span>
    </p>
  </div>

  <script src="./config.js"></script>

  <script>
    const CONFIG = window.CONFIG;
    if (!CONFIG) {
      alert("CONFIG missing. Make sure config.js is in the same folder as index.html.");
      throw new Error("CONFIG missing");
    }

    const screens = ["s0","s1","s2","s3","s4","s5","s6"].map(id => document.getElementById(id));
    const bar = document.getElementById("bar");
    const stepLabel = document.getElementById("stepLabel");

    let step = 0; // 0..6
    let grill = 0; // 0..10
    let wyrIndex = 0;

    function normalize(s){ return (s||"").trim().toLowerCase(); }

    function showStep(n){
      step = n;
      screens.forEach((s,i)=>s.classList.toggle("active", i===n));
      const pct = (n/6)*100;
      bar.style.width = pct + "%";
      stepLabel.textContent = `Step ${n+1}/7`;
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function bumpGrill(){
      grill = Math.min(10, grill + 1);
      document.getElementById("grillLevel").textContent = grill;
      document.getElementById("grillBar").style.width = (grill * 10) + "%";
      const msg = document.getElementById("grillMsg");
      if(grill <= 2) msg.textContent = "Status: peaceful‚Ä¶ for now üòå";
      else if(grill <= 5) msg.textContent = "Status: slight grilling‚Ä¶ watch out üòÖ";
      else if(grill <= 8) msg.textContent = "Status: intense grilling üî•üò≠";
      else msg.textContent = "Status: you‚Äôre roasting Abhiii to perfection üíÄüî•";
    }

    // Personalize UI
    document.getElementById("herName").textContent = CONFIG.herName;
    document.getElementById("introText").textContent = CONFIG.introText;
    document.getElementById("footerYourName").textContent = CONFIG.yourName;

    // Level 1
    document.getElementById("q1Text").textContent = CONFIG.q1.text;
    const q1Choices = document.getElementById("q1Choices");
    const q1Hint = document.getElementById("q1Hint");

    function renderQ1(){
      q1Choices.innerHTML = "";
      q1Hint.textContent = CONFIG.q1.hint;
      CONFIG.q1.choices.forEach(c => {
        const b = document.createElement("button");
        b.className = "choice";
        b.textContent = c.text;
        b.addEventListener("click", () => {
          [...q1Choices.querySelectorAll("button")].forEach(x => x.disabled = true);
          if(c.correct){
            b.classList.add("correct");
            setTimeout(()=>showStep(2), 550);
          } else {
            b.classList.add("wrong");
            bumpGrill();
            q1Hint.textContent = "Nope üòÑ Try again (hit Back and re-enter).";
          }
        });
        q1Choices.appendChild(b);
      });
    }
    renderQ1();

    // Level 2 (Nickname checklist)
    document.getElementById("q2Text").textContent = CONFIG.q2.text;

    const q2Checklist = document.getElementById("q2Checklist");
    const q2Reveal = document.getElementById("q2Reveal");

    function renderQ2(){
      q2Checklist.innerHTML = "";
      q2Reveal.style.display = "none";
      q2Reveal.textContent = "";

      CONFIG.q2.options.forEach((opt, i) => {
        const row = document.createElement("div");
        row.className = "checkItem";

        const id = "q2_" + i;
        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.id = id;

        const label = document.createElement("label");
        label.htmlFor = id;
        label.textContent = opt;

        row.appendChild(cb);
        row.appendChild(label);
        q2Checklist.appendChild(row);
      });
    }
    renderQ2();

    function getQ2Picks(){
      const picks = [];
      [...q2Checklist.querySelectorAll("input[type='checkbox']")].forEach((cb, idx) => {
        if(cb.checked) picks.push(CONFIG.q2.options[idx]);
      });
      return picks;
    }

    document.getElementById("q2Continue").onclick = () => {
      const picks = getQ2Picks();
      const hasAll = picks.includes("all of the above");
      const hasNone = picks.includes("none of the above");

      let line = "";
      if(hasAll && !hasNone){
        line = "All of the above?! üò≠‚ù§Ô∏è okay you win. " + CONFIG.q2.revealLine;
      } else if(hasNone && !hasAll){
        line = "None of the above?? üò≠ fine‚Ä¶ I‚Äôll just call you *mine* then. " + CONFIG.q2.revealLine;
      } else if(hasAll && hasNone){
        line = "Both ‚Äòall‚Äô and ‚Äònone‚Äô? You‚Äôre chaos üò≠üî• " + CONFIG.q2.revealLine;
      } else if(picks.length === 0){
        line = "You didn‚Äôt pick anything üò≠ okay‚Ä¶ I‚Äôll pick for you: Chakkoo ‚ù§Ô∏è " + CONFIG.q2.revealLine;
      } else {
        line = "Okay noted üòå‚úÖ (" + picks.join(", ") + "). " + CONFIG.q2.revealLine;
      }

      q2Reveal.style.display = "block";
      q2Reveal.textContent = line;

      setTimeout(()=>showStep(3), 900);
    };

    document.getElementById("q2Clear").onclick = () => {
      [...q2Checklist.querySelectorAll("input[type='checkbox']")].forEach(cb => cb.checked = false);
      q2Reveal.style.display = "none";
      q2Reveal.textContent = "";
    };

    // Level 3
    const q3Choices = document.getElementById("q3Choices");
    const q3Reveal = document.getElementById("q3Reveal");
    const toWYR = document.getElementById("toWouldYouRather");

    function renderQ3(){
      q3Choices.innerHTML = "";
      q3Reveal.style.display = "none";
      q3Reveal.textContent = "";
      toWYR.disabled = true;

      CONFIG.q3.choices.forEach(c => {
        const b = document.createElement("button");
        b.className = "choice";
        b.textContent = c.text;
        b.addEventListener("click", () => {
          [...q3Choices.querySelectorAll("button")].forEach(x => x.disabled = true);
          if(c.correct){
            b.classList.add("correct");
            q3Reveal.style.display = "block";
            q3Reveal.textContent = CONFIG.q3.reveal;
            toWYR.disabled = false;
          } else {
            b.classList.add("wrong");
            bumpGrill();
            q3Reveal.style.display = "block";
            q3Reveal.textContent = "LMAO üò≠ try again‚Ä¶ we both know the truth.";
          }
        });
        q3Choices.appendChild(b);
      });
    }
    renderQ3();

    // Level 4 (Would you rather)
    const wyrChoices = document.getElementById("wyrChoices");
    const wyrReveal = document.getElementById("wyrReveal");
    const toMemory = document.getElementById("toMemoryCard");

    function renderWYR(){
      wyrChoices.innerHTML = "";
      wyrReveal.style.display = "none";
      wyrReveal.textContent = "";
      toMemory.disabled = true;

      const item = CONFIG.wyr[wyrIndex % CONFIG.wyr.length];

      const a = document.createElement("button");
      a.className = "choice";
      a.textContent = "A) " + item.a;

      const b = document.createElement("button");
      b.className = "choice";
      b.textContent = "B) " + item.b;

      function choose(){
        wyrReveal.style.display = "block";
        wyrReveal.textContent = item.reveal;
        toMemory.disabled = false;
      }

      a.addEventListener("click", choose);
      b.addEventListener("click", choose);

      wyrChoices.appendChild(a);
      wyrChoices.appendChild(b);
    }
    renderWYR();

    // Level 5 (Memory cards)
    const cardReveal = document.getElementById("cardReveal");
    const toFinal = document.getElementById("toFinal");

    function resetCards(){
      cardReveal.style.display = "none";
      cardReveal.textContent = "";
      toFinal.disabled = true;
    }
    resetCards();

    document.querySelectorAll("[data-card]").forEach(btn => {
      btn.addEventListener("click", () => {
        const idx = Number(btn.getAttribute("data-card"));
        cardReveal.style.display = "block";
        cardReveal.textContent = CONFIG.cards[idx] || "I love you.";
        toFinal.disabled = false;
      });
    });

    document.getElementById("proposalText").textContent = CONFIG.proposalText;

    // Final
    const finalInput = document.getElementById("finalInput");
    const finalFeedback = document.getElementById("finalFeedback");
    const finalReveal = document.getElementById("finalReveal");
    finalInput.placeholder = CONFIG.final.hint;

    document.getElementById("finalSubmit").onclick = () => {
      const val = normalize(finalInput.value);
      const target = normalize(CONFIG.final.phrase);
      if(val === target){
        finalFeedback.textContent = "Unlocked üíò";
        finalFeedback.style.color = "rgba(77,255,181,.9)";
        finalReveal.style.display = "block";
        burstHearts();
      } else {
        bumpGrill();
        finalFeedback.textContent = "Wrong phrase üòÑ " + CONFIG.final.hint;
        finalFeedback.style.color = "rgba(255,255,255,.75)";
      }
    };

    // Navigation
    document.getElementById("startBtn").onclick = () => showStep(1);

    document.getElementById("back1").onclick = () => { renderQ1(); showStep(0); };
    document.getElementById("back2").onclick = () => { renderQ2(); showStep(1); };
    document.getElementById("back3").onclick = () => { renderQ3(); showStep(2); };

    document.getElementById("toWouldYouRather").onclick = () => {
      wyrIndex = 0;
      renderWYR();
      showStep(4);
    };
    document.getElementById("back4").onclick = () => { showStep(3); };

    document.getElementById("toMemoryCard").onclick = () => {
      resetCards();
      showStep(5);
    };
    document.getElementById("back5").onclick = () => { showStep(4); };

    document.getElementById("toFinal").onclick = () => showStep(6);

    document.getElementById("restart").onclick = () => {
      grill = 0;
      document.getElementById("grillLevel").textContent = grill;
      document.getElementById("grillBar").style.width = "0%";
      document.getElementById("grillMsg").textContent = "Status: peaceful‚Ä¶ for now üòå";

      wyrIndex = 0;

      renderQ1();
      renderQ2();
      renderQ3();
      renderWYR();
      resetCards();

      finalInput.value = "";
      finalFeedback.textContent = "";
      finalReveal.style.display = "none";

      showStep(0);
    };

    function burstHearts(){
      const emojis = ["üíò","üíó","üíû","üíù","‚ú®","üåô","üî•"];
      for(let i=0;i<30;i++){
        const s = document.createElement("div");
        s.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        s.style.position = "fixed";
        s.style.left = (Math.random()*100) + "vw";
        s.style.top = "110vh";
        s.style.fontSize = (14 + Math.random()*26) + "px";
        s.style.transition = "transform 1.6s ease, opacity 1.6s ease";
        s.style.zIndex = 9999;
        document.body.appendChild(s);
        requestAnimationFrame(()=>{
          s.style.transform = `translateY(-140vh) rotate(${(Math.random()*180-90)}deg)`;
          s.style.opacity = "0";
        });
        setTimeout(()=>s.remove(), 1700);
      }
    }
  </script>
</body>
</html>
